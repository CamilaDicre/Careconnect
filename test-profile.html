<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Profile - Careconnect</title>
    <link rel="icon" type="image/png" href="assets/carefavicon.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/universal-responsive.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #f8f9fa;
            padding: 20px;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        .test-btn {
            background: linear-gradient(135deg, #1976d2, #42a5f5);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(25, 118, 210, 0.3);
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e9ecef;
            border-radius: 15px;
        }
        .test-result {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="text-center mb-4">üß™ Test Profile Component</h1>
        
        <div class="test-section">
            <h3>üîß Test Functions</h3>
            <button class="test-btn" onclick="testLocalStorage()">Test localStorage</button>
            <button class="test-btn" onclick="testAvatarUtils()">Test AvatarUtils</button>
            <button class="test-btn" onclick="testUserProfile()">Test UserProfile</button>
            <button class="test-btn" onclick="clearData()">Clear Data</button>
        </div>
        
        <div class="test-section">
            <h3>üë§ Create Test User</h3>
            <button class="test-btn" onclick="createTestUser()">Create Test User</button>
            <button class="test-btn" onclick="showUsers()">Show All Users</button>
        </div>
        
        <div class="test-section">
            <h3>üìä Results</h3>
            <div id="results" class="test-result">Click a button to see results...</div>
        </div>
        
        <div class="test-section">
            <h3>üë§ Profile Component</h3>
            <div id="profile-container"></div>
        </div>
    </div>

    <script src="js/localStorage-utils.js"></script>
    <script src="js/avatar-utils.js"></script>
    <script src="dashboard/user-profile.js"></script>
    
    <script>
        function log(message) {
            const results = document.getElementById('results');
            results.textContent = message;
            console.log(message);
        }

        function logout() {
            localStorage.removeItem('loggedInUser');
            alert('Logged out successfully!');
        }

        function testLocalStorage() {
            try {
                const loggedInUser = localStorage.getItem('loggedInUser');
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                log(`‚úÖ localStorage Test:
Logged In User: ${loggedInUser}
Total Users: ${users.length}
Users: ${JSON.stringify(users, null, 2)}`);
            } catch (error) {
                log(`‚ùå localStorage Error: ${error.message}`);
            }
        }

        function testAvatarUtils() {
            try {
                if (window.AvatarUtils) {
                    const userData = AvatarUtils.getUserDataWithAvatar();
                    log(`‚úÖ AvatarUtils Test:
User Data: ${JSON.stringify(userData, null, 2)}`);
                } else {
                    log(`‚ùå AvatarUtils not found`);
                }
            } catch (error) {
                log(`‚ùå AvatarUtils Error: ${error.message}`);
            }
        }

        function testUserProfile() {
            try {
                const profileContainer = document.getElementById('profile-container');
                profileContainer.innerHTML = '<user-profile></user-profile>';
                log(`‚úÖ UserProfile component created`);
            } catch (error) {
                log(`‚ùå UserProfile Error: ${error.message}`);
            }
        }

        function createTestUser() {
            try {
                const testUser = {
                    username: 'testuser',
                    name: 'Mar√≠a Gonz√°lez',
                    email: 'maria@example.com',
                    role: 'patient',
                    age: '25',
                    gender: 'female',
                    phone: '123-456-7890',
                    address: '123 Test St, Test City',
                    bio: 'This is a test user for profile testing',
                    areas: ['Cardiology', 'Diabetes Management', 'Elderly Care'],
                    experience: '5 years',
                    education: 'Nursing Degree',
                    certifications: 'CPR, First Aid',
                    skills: 'Patient Care, Medication Management',
                    languages: 'English, Spanish',
                    availability: 'Monday-Friday, 9AM-5PM'
                };

                const users = JSON.parse(localStorage.getItem('users') || '[]');
                users.push(testUser);
                localStorage.setItem('users', JSON.stringify(users));
                localStorage.setItem('loggedInUser', testUser.username);

                log(`‚úÖ Test User Created:
Username: ${testUser.username}
Name: ${testUser.name}
Email: ${testUser.email}
Role: ${testUser.role}
Areas: ${testUser.areas.join(', ')}`);
            } catch (error) {
                log(`‚ùå Create Test User Error: ${error.message}`);
            }
        }

        function showUsers() {
            try {
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                log(`üìã All Users:
${JSON.stringify(users, null, 2)}`);
            } catch (error) {
                log(`‚ùå Show Users Error: ${error.message}`);
            }
        }

        function clearData() {
            try {
                localStorage.removeItem('users');
                localStorage.removeItem('loggedInUser');
                log(`üóëÔ∏è Data cleared`);
            } catch (error) {
                log(`‚ùå Clear Data Error: ${error.message}`);
            }
        }

        // Auto-run tests on load
        window.addEventListener('load', () => {
            log('üöÄ Test page loaded. Click buttons to test functionality.');
        });
    </script>
</body>
</html> 