<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Careconnect</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Josefin+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body class="dashboard-page">
    <div style="position:fixed;top:10px;right:10px;z-index:9999;background:#fff;padding:8px 16px;border-radius:8px;box-shadow:0 2px 8px #0001;">
      <label for="userTypeSelect">Tipo de usuario: </label>
      <select id="userTypeSelect">
        <option value="patient">Paciente</option>
        <option value="caregiver">Cuidador</option>
      </select>
    </div>
    <welcome-overlay></welcome-overlay>
    <care-sidebar></care-sidebar>
    <main id="dashboard-content" style="margin-left:350px;transition:margin-left 0.4s ease;">
      <!-- Aquí se mostrará la sección seleccionada -->
      <user-profile></user-profile>
    </main>
    
    <!-- Notificación personalizada -->
    <div id="notification" style="position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) translateY(-100px);background:linear-gradient(135deg,#4facfe,#00f2fe);color:white;padding:20px 30px;border-radius:16px;box-shadow:0 12px 40px rgba(79,172,254,0.3);z-index:10000;opacity:0;transition:all 0.6s ease;max-width:350px;font-family:'Poppins',sans-serif;font-weight:500;text-align:center;backdrop-filter:blur(10px);">
      <div style="display:flex;align-items:center;justify-content:center;gap:12px;">
        <i class="bi bi-check-circle-fill" style="font-size:24px;"></i>
        <span id="notification-text" style="font-size:16px;">Sesión cerrada correctamente</span>
      </div>
    </div>
    
    <!-- Overlay de transición de página -->
    <div id="page-transition" style="position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#4facfe,#00f2fe);z-index:99999;opacity:0;visibility:hidden;transition:all 1.2s ease;display:flex;align-items:center;justify-content:center;">
      <div style="text-align:center;color:white;font-family:'Poppins',sans-serif;">
        <i class="bi bi-arrow-right-circle-fill" style="font-size:48px;margin-bottom:20px;display:block;"></i>
        <h3 style="margin:0;font-weight:600;font-size:24px;">Redirigiendo...</h3>
        <p style="margin:10px 0 0 0;font-size:16px;opacity:0.9;">Esperamos verlo de nuevo</p>
      </div>
    </div>
    <script src="dashboard/welcome-overlay.js"></script>
    <script src="dashboard/care-sidebar.js"></script>
    <script src="dashboard/user-profile.js"></script>
    <script src="dashboard/medicine-list.js"></script>
    <script src="dashboard/health-charts.js"></script>
    <script src="dashboard/calendar-view.js"></script>
    <script src="dashboard/caregiver-search.js"></script>
    <script src="dashboard/patient-requests.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    // Selector temporal para alternar entre paciente y cuidador
    window.userType = 'patient';
    document.getElementById('userTypeSelect').addEventListener('change', function(e) {
      window.userType = e.target.value;
      // Aquí podrías recargar los componentes según el tipo de usuario
      location.reload();
    });
    
    // Función para mostrar notificación
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      
      // Configurar colores según el tipo
      if (type === 'success') {
        notification.style.background = 'linear-gradient(135deg, #4facfe, #00f2fe)';
        notification.style.boxShadow = '0 12px 40px rgba(79,172,254,0.3)';
        notification.innerHTML = `
          <div style="display:flex;align-items:center;justify-content:center;gap:12px;">
            <i class="bi bi-check-circle-fill" style="font-size:24px;"></i>
            <span style="font-size:16px;">${message}</span>
          </div>
        `;
      } else if (type === 'error') {
        notification.style.background = 'linear-gradient(135deg, #ff9a9e, #fecfef)';
        notification.style.boxShadow = '0 12px 40px rgba(255,154,158,0.3)';
        notification.innerHTML = `
          <div style="display:flex;align-items:center;justify-content:center;gap:12px;">
            <i class="bi bi-exclamation-triangle-fill" style="font-size:24px;"></i>
            <span style="font-size:16px;">${message}</span>
          </div>
        `;
      }
      
      // Mostrar notificación con transición suave
      notification.style.opacity = '1';
      notification.style.transform = 'translate(-50%, -50%) translateY(0)';
      
      // Ocultar después de 4 segundos con transición suave
      setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translate(-50%, -50%) translateY(-50px)';
      }, 4000);
    }
    
    // Función para mostrar transición de página
    function showPageTransition() {
      const transition = document.getElementById('page-transition');
      transition.style.visibility = 'visible';
      transition.style.opacity = '1';
    }
    
    // Función de logout
    function logout() {
      // Aquí puedes agregar lógica para limpiar la sesión
      showNotification('Sesión cerrada correctamente', 'success');
      
      // Mostrar transición de página después de la notificación
      setTimeout(() => {
        showPageTransition();
        
        // Redirigir después de mostrar la transición por más tiempo
        setTimeout(() => {
          window.location.href = 'index.html';
        }, 3000);
      }, 2500);
    }
    </script>
</body>
</html> 